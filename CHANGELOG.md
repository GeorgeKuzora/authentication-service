# Change Log

## 0.1.0

### Новое

- Добавлены базовые абстракции для сервиса:
    - AuthService - сервис аутентификации пользователя.
    - InMemoryRepository - реализация хранилища данных в виде списков Python.
- Добавлен пакет тестов AuthService. Пакет тестов включает юнит и интеграционные тесты.
- Добавлен пакет тестов InMemoryRepository. Пакет тестов включает юнит и интеграционные тесты.
- Создан файл gitlab-ci.yml. Настоен пайплайн для линтера и тестов.

## 0.2.0

### Новое

- Добавлены хэндлеры HTTP запросов. Реализованы на FastAPI.
- Добавлены заглушки реализаций кэша и очереди сообщений сервиса.
- Добавлен метод verify для верификации пользователя при помощи фотографии.
- Добавлен пакет тестов для тестирования нового функционала.

## 0.3.0

### Новое

- Добавлен Dockerfile и .dockerignore.
- Настроена сборка приложения в Docker контейнере.

## 0.4.0

### Новое

- Добавляет хэндлеры healthcheck.
- Добавляет пакет тестов хэндлеров.

### Изменения

- Добавляет исключения линтера для тестов.
- Добавляет новые классы ошибок.
- Добавляет проверку 422 ошибки в хэндлер register.
- Исправляет недочеты и баги.

## 0.5.0

### Новое

- Добавляет модуль конфигурации приложения из файла `config-local.yml`.
- Добавляет зависимости приложения для работы с клиентом kafka.
- Добавляет имплементацию `KafkaProducer`. `KafkaProducer` обеспечивает отправку сообщений и именем пользователя и путем к изображению пользователя в очередь сообщений kafka.
- Обновляет пакет тестов для тестирования нового функционала.

### Изменения

- Изменяет процесс инициализации объекта сервиса. Объект сервиса теперь инициализируется в функции `lifespan`. В хэндлеры объект сервиса передается через внедрение в объект `app`.
- Добавляет проверку доступности клиента kafka в хэндлер `healthz/is_ready`.
- Исправляет метод и хэндлер `verify`. Хэндлер имеет атрибуты `username` и `image` передаваемые в формате `multipart/form-data`.
- Исправляет недочеты и баги.

## 0.6.0

### Новое

- Добавляет sqlalchemy, pyscopg2 и alembic в зависимости проекта.
- Добавляет конфигурацию базы данных PostgreSQL в модуле `config.py` и файле конфигурации `config-local.yml`.
- Добавляет пакет тестов для тестирования конфигурации базы данных PostgreSQL.
- Добавляет класс `DBStorage` соответствующий интерфейсу `Storage` и инкапсулирующий логику взаимодействия с базой данных PostgreSQL.
- Добавляет пакет тестов класса `DBStorage` в проект.
- Добавляет инструмент для управления миграциями **alembic** в проект.
- Добавляет файлы миграции базы данных в проект.

### Изменения

- Подключает сервис `db` с базой данных PostgreSQL к dev-контейнеру.
- Добавляет сервис `db` с базой данных PostgreSQL в конвейер gitlab-ci.

## 0.7.0

### Новое

- Созданы манифесты:
	- `deployment.yml`
	- `service.yml`
	- `configMap.yml`
	- `job.yml`
	- `secret.yml`
	- `pvc.yml`
- Добавлена конфигурация сервиса в файле `config-kube.yml`.
- В gitlab-ci добавлен этап, который отвечает за сборку и загрузку образов в реестр.
- Добавлена конфигурация `alembic_kube.ini` для миграций базы данных в среде kubernetes.

### Изменения

- Изменен рабочий порт сервиса на 8080.
- Обновлен `.dockerignore`.

## 0.8.0

### Новое

- Добавлены чарты пакетного менеджера helm.
- Добавлена дополнительная конфигурация значений helm-чартов в файле `values/test.yaml`.

## 0.9.0

### Новое

- Добавлены метрики Prometheus.

## 0.10.0

### Новое

- Добавлен трейсинг к хэндлеру verify
- Добвален трейсинг к хэндлеру check_token
- Устанавлены теги трейсинга в хэндлере register
- Добавлен трейсинг хэндлера /login
- Добавлен класс тэгов трейсера
- Добавлен трейсинг для хэндлера register
- Подключен модуль tracing к сервису
- Добавлен модуль tracing.py
- Обновлены тесты конфигурации
- Добавлена конфигурация трейсинга
- Добавлены opentracing и jaeger-client в зависимости проекта

## 0.10.0

### Новое

- Обновлен пакет тестов сервиса.
- Добавлена имлементация клиента redis.
- Добавлена конфигурация redis.
- Добавлен redis в docker-compose dev-контейнера.
- Добавлен redis в зависимости приложения.
